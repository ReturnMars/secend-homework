# ğŸ” ç”Ÿäº§ç¯å¢ƒåç«¯é•œåƒ (å•äºŒè¿›åˆ¶é›¶ä¾èµ–)
# ä½¿ç”¨ debian-slimï¼Œå·²å†…ç½® ca-certificatesï¼Œæ— éœ€è”ç½‘å®‰è£…åŒ…
FROM debian:bookworm-slim

# è®¾ç½®æ—¶åŒºï¼ˆé€šè¿‡ç¯å¢ƒå˜é‡ï¼Œæ— éœ€å®‰è£… tzdataï¼‰
ENV TZ=Asia/Shanghai

WORKDIR /app

# ä»æœ¬åœ°å¤åˆ¶äº¤å‰ç¼–è¯‘å‡ºçš„ Linux äºŒè¿›åˆ¶æ–‡ä»¶
COPY backend/main-linux /app/server

# å¤åˆ¶è¿ç§»æ–‡ä»¶
COPY backend/migrations /app/migrations

# è¿è¡Œç¯å¢ƒå‡†å¤‡
RUN chmod +x /app/server && mkdir -p /app/uploads

# ç«¯å£æš´éœ²
EXPOSE 8080

# å¯åŠ¨
CMD ["/app/server"]
